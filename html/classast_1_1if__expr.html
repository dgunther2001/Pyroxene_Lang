<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pyroxene: ast::if_expr Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pyroxene
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceast.html">ast</a></li><li class="navelem"><a class="el" href="classast_1_1if__expr.html">if_expr</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classast_1_1if__expr-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ast::if_expr Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ast_8h_source.html">ast.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ast::if_expr:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classast_1_1if__expr.png" usemap="#ast::if_5Fexpr_map" alt=""/>
  <map id="ast::if_5Fexpr_map" name="ast::if_5Fexpr_map">
<area href="classast_1_1top__level__expr.html" alt="ast::top_level_expr" shape="rect" coords="0,0,117,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a34dff65e28b1fdc94a53800d896d2e28" id="r_a34dff65e28b1fdc94a53800d896d2e28"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a34dff65e28b1fdc94a53800d896d2e28">if_expr</a> (std::unique_ptr&lt; <a class="el" href="classast_1_1top__level__expr.html">top_level_expr</a> &gt; condition, std::vector&lt; std::unique_ptr&lt; <a class="el" href="classast_1_1top__level__expr.html">top_level_expr</a> &gt; &gt; expressions, std::unique_ptr&lt; <a class="el" href="classast_1_1top__level__expr.html">top_level_expr</a> &gt; else_stmt)</td></tr>
<tr class="separator:a34dff65e28b1fdc94a53800d896d2e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6e8c5f5345e01f596ae9fd6bf43a839" id="r_ae6e8c5f5345e01f596ae9fd6bf43a839"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6e8c5f5345e01f596ae9fd6bf43a839">semantic_analysis</a> () override</td></tr>
<tr class="separator:ae6e8c5f5345e01f596ae9fd6bf43a839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4e600ed99c23a53b7469a6bc337beaf" id="r_ad4e600ed99c23a53b7469a6bc337beaf"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4e600ed99c23a53b7469a6bc337beaf">get_ast_class</a> () const override</td></tr>
<tr class="separator:ad4e600ed99c23a53b7469a6bc337beaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae01a4ba97ccdeb780f87cf579f4a5264" id="r_ae01a4ba97ccdeb780f87cf579f4a5264"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae01a4ba97ccdeb780f87cf579f4a5264">debug_output</a> ()</td></tr>
<tr class="separator:ae01a4ba97ccdeb780f87cf579f4a5264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af769182521a67c74bf235580a9aa917a" id="r_af769182521a67c74bf235580a9aa917a"><td class="memItemLeft" align="right" valign="top">llvm::Value *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af769182521a67c74bf235580a9aa917a">codegen</a> () override</td></tr>
<tr class="separator:af769182521a67c74bf235580a9aa917a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6346eb03d314a132fe1431ae1c0c323a" id="r_a6346eb03d314a132fe1431ae1c0c323a"><td class="memItemLeft" align="right" valign="top">llvm::BasicBlock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6346eb03d314a132fe1431ae1c0c323a">get_merge_block</a> () override</td></tr>
<tr class="separator:a6346eb03d314a132fe1431ae1c0c323a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa57ef3cdd4369756e07017bedd09e082" id="r_aa57ef3cdd4369756e07017bedd09e082"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa57ef3cdd4369756e07017bedd09e082">set_merge_block</a> (llvm::BasicBlock *new_merge_block) override</td></tr>
<tr class="separator:aa57ef3cdd4369756e07017bedd09e082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classast_1_1top__level__expr"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classast_1_1top__level__expr')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classast_1_1top__level__expr.html">ast::top_level_expr</a></td></tr>
<tr class="memitem:a8d58ff4331899fba8a326afdbf8fabfe inherit pub_methods_classast_1_1top__level__expr" id="r_a8d58ff4331899fba8a326afdbf8fabfe"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classast_1_1top__level__expr.html#a8d58ff4331899fba8a326afdbf8fabfe">~top_level_expr</a> ()=default</td></tr>
<tr class="separator:a8d58ff4331899fba8a326afdbf8fabfe inherit pub_methods_classast_1_1top__level__expr"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee2731fcd814b47a34026bbabb88b15 inherit pub_methods_classast_1_1top__level__expr" id="r_a8ee2731fcd814b47a34026bbabb88b15"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classast_1_1top__level__expr.html#a8ee2731fcd814b47a34026bbabb88b15">set_expr_type</a> (<a class="el" href="namespacetype__enum.html#a87266d8d965aff35e2d37a7793dafd67">type_enum::types</a> new_type)</td></tr>
<tr class="separator:a8ee2731fcd814b47a34026bbabb88b15 inherit pub_methods_classast_1_1top__level__expr"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae35833709d7439c73abc3c5feecb594f inherit pub_methods_classast_1_1top__level__expr" id="r_ae35833709d7439c73abc3c5feecb594f"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacetype__enum.html#a87266d8d965aff35e2d37a7793dafd67">type_enum::types</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classast_1_1top__level__expr.html#ae35833709d7439c73abc3c5feecb594f">get_expr_type</a> () const</td></tr>
<tr class="separator:ae35833709d7439c73abc3c5feecb594f inherit pub_methods_classast_1_1top__level__expr"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890040cc8ec1ed0bc8f7d1ff7802555b inherit pub_methods_classast_1_1top__level__expr" id="r_a890040cc8ec1ed0bc8f7d1ff7802555b"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classast_1_1top__level__expr.html#a890040cc8ec1ed0bc8f7d1ff7802555b">get_name</a> () const</td></tr>
<tr class="separator:a890040cc8ec1ed0bc8f7d1ff7802555b inherit pub_methods_classast_1_1top__level__expr"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3b494584b401676ab059509753166df inherit pub_methods_classast_1_1top__level__expr" id="r_aa3b494584b401676ab059509753166df"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classast_1_1top__level__expr.html#aa3b494584b401676ab059509753166df">is_elif</a> ()</td></tr>
<tr class="separator:aa3b494584b401676ab059509753166df inherit pub_methods_classast_1_1top__level__expr"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac17734231b45c798f8543d1acb9e5191 inherit pub_methods_classast_1_1top__level__expr" id="r_ac17734231b45c798f8543d1acb9e5191"><td class="memItemLeft" align="right" valign="top">virtual std::unique_ptr&lt; <a class="el" href="classast_1_1top__level__expr.html">top_level_expr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classast_1_1top__level__expr.html#ac17734231b45c798f8543d1acb9e5191">grab_else_if</a> ()</td></tr>
<tr class="separator:ac17734231b45c798f8543d1acb9e5191 inherit pub_methods_classast_1_1top__level__expr"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1004ba95ee647a4ebbde380ad2f8961 inherit pub_methods_classast_1_1top__level__expr" id="r_af1004ba95ee647a4ebbde380ad2f8961"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacetype__enum.html#a87266d8d965aff35e2d37a7793dafd67">type_enum::types</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classast_1_1top__level__expr.html#af1004ba95ee647a4ebbde380ad2f8961">get_obj_type</a> () const</td></tr>
<tr class="separator:af1004ba95ee647a4ebbde380ad2f8961 inherit pub_methods_classast_1_1top__level__expr"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section user"><dt>Holds all data held within if blocks.</dt><dd><div class="fragment"><div class="line"><span class="keyword">class </span><a class="code hl_class" href="classast_1_1if__expr.html">if_expr</a> : <span class="keyword">public</span> <a class="code hl_class" href="classast_1_1top__level__expr.html">top_level_expr</a> {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    std::unique_ptr&lt;top_level_expr&gt; condition;</div>
<div class="line">    std::vector&lt;std::unique_ptr&lt;top_level_expr&gt;&gt; expressions;</div>
<div class="line">    std::unique_ptr&lt;top_level_expr&gt; else_stmt;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <a class="code hl_function" href="#a34dff65e28b1fdc94a53800d896d2e28">if_expr</a>(std::unique_ptr&lt;top_level_expr&gt; condition, std::vector&lt;std::unique_ptr&lt;top_level_expr&gt;&gt; expressions, std::unique_ptr&lt;top_level_expr&gt; else_stmt) :</div>
<div class="line">        condition(std::move(condition)),</div>
<div class="line">        expressions(std::move(expressions)),</div>
<div class="line">        else_stmt(std::move(else_stmt))</div>
<div class="line">        {}</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="#ae6e8c5f5345e01f596ae9fd6bf43a839">semantic_analysis</a>() <span class="keyword">override</span>;</div>
<div class="line">    std::string <a class="code hl_function" href="#ad4e600ed99c23a53b7469a6bc337beaf">get_ast_class</a>()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;if&quot;</span>; }</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="#ae01a4ba97ccdeb780f87cf579f4a5264">debug_output</a>();</div>
<div class="line">    llvm::Value* <a class="code hl_function" href="#af769182521a67c74bf235580a9aa917a">codegen</a>() <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="ttc" id="aclassast_1_1if__expr_html"><div class="ttname"><a href="classast_1_1if__expr.html">ast::if_expr</a></div><div class="ttdef"><b>Definition</b> ast.h:650</div></div>
<div class="ttc" id="aclassast_1_1if__expr_html_a34dff65e28b1fdc94a53800d896d2e28"><div class="ttname"><a href="#a34dff65e28b1fdc94a53800d896d2e28">ast::if_expr::if_expr</a></div><div class="ttdeci">if_expr(std::unique_ptr&lt; top_level_expr &gt; condition, std::vector&lt; std::unique_ptr&lt; top_level_expr &gt; &gt; expressions, std::unique_ptr&lt; top_level_expr &gt; else_stmt)</div><div class="ttdef"><b>Definition</b> ast.h:658</div></div>
<div class="ttc" id="aclassast_1_1if__expr_html_ad4e600ed99c23a53b7469a6bc337beaf"><div class="ttname"><a href="#ad4e600ed99c23a53b7469a6bc337beaf">ast::if_expr::get_ast_class</a></div><div class="ttdeci">std::string get_ast_class() const override</div><div class="ttdef"><b>Definition</b> ast.h:664</div></div>
<div class="ttc" id="aclassast_1_1if__expr_html_ae01a4ba97ccdeb780f87cf579f4a5264"><div class="ttname"><a href="#ae01a4ba97ccdeb780f87cf579f4a5264">ast::if_expr::debug_output</a></div><div class="ttdeci">void debug_output()</div></div>
<div class="ttc" id="aclassast_1_1if__expr_html_ae6e8c5f5345e01f596ae9fd6bf43a839"><div class="ttname"><a href="#ae6e8c5f5345e01f596ae9fd6bf43a839">ast::if_expr::semantic_analysis</a></div><div class="ttdeci">void semantic_analysis() override</div><div class="ttdef"><b>Definition</b> type_checker.cpp:241</div></div>
<div class="ttc" id="aclassast_1_1if__expr_html_af769182521a67c74bf235580a9aa917a"><div class="ttname"><a href="#af769182521a67c74bf235580a9aa917a">ast::if_expr::codegen</a></div><div class="ttdeci">llvm::Value * codegen() override</div><div class="ttdef"><b>Definition</b> codegen.cpp:909</div></div>
<div class="ttc" id="aclassast_1_1top__level__expr_html"><div class="ttname"><a href="classast_1_1top__level__expr.html">ast::top_level_expr</a></div><div class="ttdef"><b>Definition</b> ast.h:58</div></div>
</div><!-- fragment --> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a34dff65e28b1fdc94a53800d896d2e28" name="a34dff65e28b1fdc94a53800d896d2e28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34dff65e28b1fdc94a53800d896d2e28">&#9670;&#160;</a></span>if_expr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ast::if_expr::if_expr </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classast_1_1top__level__expr.html">top_level_expr</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>condition</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classast_1_1top__level__expr.html">top_level_expr</a> &gt; &gt;</td>          <td class="paramname"><span class="paramname"><em>expressions</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classast_1_1top__level__expr.html">top_level_expr</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>else_stmt</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af769182521a67c74bf235580a9aa917a" name="af769182521a67c74bf235580a9aa917a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af769182521a67c74bf235580a9aa917a">&#9670;&#160;</a></span>codegen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::Value * ast::if_expr::codegen </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section user"><dt>Code generation for if expressions.</dt><dd></dd></dl>
<dl class="section user"><dt>Initialize a static local variable that serves as a the naming convention for LLVM labels</dt><dd><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> block_name_counter = -1;</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Evaluate the condition to an LLVM Value*, and convert it tp am integer comparison.</dt><dd><div class="fragment"><div class="line">llvm::Value* condition_value = condition-&gt;codegen();</div>
<div class="line">condition_value = <a class="code hl_variable" href="namespacecodegen.html#a79b39c1264ded17ff5cd25cd3b5f880c">codegen::IR_Builder</a>-&gt;CreateICmpNE(condition_value, llvm::ConstantInt::get(*<a class="code hl_variable" href="namespacecodegen.html#a2ed9460a080f3ccd65a6b8afa232595a">codegen::LLVM_Context</a>, llvm::APInt(1, 0)), <span class="stringliteral">&quot;__if_cond__&quot;</span>);</div>
<div class="ttc" id="anamespacecodegen_html_a2ed9460a080f3ccd65a6b8afa232595a"><div class="ttname"><a href="namespacecodegen.html#a2ed9460a080f3ccd65a6b8afa232595a">codegen::LLVM_Context</a></div><div class="ttdeci">std::unique_ptr&lt; llvm::LLVMContext &gt; LLVM_Context</div><div class="ttdef"><b>Definition</b> codegen.cpp:14</div></div>
<div class="ttc" id="anamespacecodegen_html_a79b39c1264ded17ff5cd25cd3b5f880c"><div class="ttname"><a href="namespacecodegen.html#a79b39c1264ded17ff5cd25cd3b5f880c">codegen::IR_Builder</a></div><div class="ttdeci">std::unique_ptr&lt; llvm::IRBuilder&lt;&gt; &gt; IR_Builder</div><div class="ttdef"><b>Definition</b> codegen.cpp:16</div></div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Grab the parent function, and create a then block (will contain expressions in the if block).</dt><dd><div class="fragment"><div class="line">llvm::BasicBlock* then_blk = llvm::BasicBlock::Create(*<a class="code hl_variable" href="namespacecodegen.html#a2ed9460a080f3ccd65a6b8afa232595a">codegen::LLVM_Context</a>, <span class="stringliteral">&quot;__then__&quot;</span> + std::to_string(++block_name_counter) + <span class="stringliteral">&quot;__&quot;</span>, parent_function);</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>If an else statement exists in our if expression, create a new llvm block for it, otherwise set it to nullptr.</dt><dd><div class="fragment"><div class="line">llvm::BasicBlock* else_blk = else_stmt ? llvm::BasicBlock::Create(*<a class="code hl_variable" href="namespacecodegen.html#a2ed9460a080f3ccd65a6b8afa232595a">codegen::LLVM_Context</a>, <span class="stringliteral">&quot;__else__&quot;</span> + std::to_string(block_name_counter) + <span class="stringliteral">&quot;__&quot;</span>, parent_function) : nullptr;</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>If the merge block of the if expression is not yet set (not an elif), create a new basic block, and assign it to the if expression.</dt><dd><div class="fragment"><div class="line"><span class="keywordflow">if</span> (merge_block == <span class="keyword">nullptr</span>) {</div>
<div class="line">    merge_block = llvm::BasicBlock::Create(*<a class="code hl_variable" href="namespacecodegen.html#a2ed9460a080f3ccd65a6b8afa232595a">codegen::LLVM_Context</a>, <span class="stringliteral">&quot;__merge__&quot;</span> + std::to_string(block_name_counter) + <span class="stringliteral">&quot;__&quot;</span>, parent_function);</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Create a conditional branch based on the integer comparison condition to either the else block if the else block is non-null, or the merge block if it is.</dt><dd><div class="fragment"><div class="line"><a class="code hl_variable" href="namespacecodegen.html#a79b39c1264ded17ff5cd25cd3b5f880c">codegen::IR_Builder</a>-&gt;CreateCondBr(condition_value, then_blk, else_blk ? else_blk : merge_block);</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Set the insertion point to the then block, create a scope, and generate IR for all of the contained expressions.</dt><dd></dd></dl>
<dl class="section user"><dt>Then exit the scope, and create an unconditional branch to the merge point.</dt><dd><div class="fragment"><div class="line"><a class="code hl_variable" href="namespacecodegen.html#a79b39c1264ded17ff5cd25cd3b5f880c">codegen::IR_Builder</a>-&gt;SetInsertPoint(then_blk);</div>
<div class="line"><a class="code hl_function" href="namespacescope.html#a1a6b7d5eedb10b30e8db49c791b917d5">scope::create_scope</a>();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; expression : expressions) {</div>
<div class="line">    expression-&gt;codegen();</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="namespacescope.html#a21cdb44f51a06d33c6537c7167270879">scope::exit_scope</a>();</div>
<div class="line"><a class="code hl_variable" href="namespacecodegen.html#a79b39c1264ded17ff5cd25cd3b5f880c">codegen::IR_Builder</a>-&gt;CreateBr(merge_block);</div>
<div class="ttc" id="anamespacescope_html_a1a6b7d5eedb10b30e8db49c791b917d5"><div class="ttname"><a href="namespacescope.html#a1a6b7d5eedb10b30e8db49c791b917d5">scope::create_scope</a></div><div class="ttdeci">void create_scope()</div><div class="ttdef"><b>Definition</b> scoping.cpp:14</div></div>
<div class="ttc" id="anamespacescope_html_a21cdb44f51a06d33c6537c7167270879"><div class="ttname"><a href="namespacescope.html#a21cdb44f51a06d33c6537c7167270879">scope::exit_scope</a></div><div class="ttdeci">void exit_scope()</div><div class="ttdef"><b>Definition</b> scoping.cpp:28</div></div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>If the else statement is non-null, set the insertion point to the else block</dt><dd><div class="fragment"><div class="line"><span class="keywordflow">if</span> (else_stmt != <span class="keyword">nullptr</span>) {</div>
<div class="line">    <a class="code hl_variable" href="namespacecodegen.html#a79b39c1264ded17ff5cd25cd3b5f880c">codegen::IR_Builder</a>-&gt;SetInsertPoint(else_blk);</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>If the else statement is an elif, grab the if expression from the else block, and set its merge point to the common merge point, then call codegen on the nested if expr.</dt><dd><div class="fragment"><div class="line"><span class="keywordflow">if</span> (else_stmt-&gt;is_elif()) {</div>
<div class="line">    <span class="keyword">auto</span> elif_node = else_stmt-&gt;grab_else_if();</div>
<div class="line">    elif_node-&gt;set_merge_block(merge_block);</div>
<div class="line">    elif_node-&gt;codegen();</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>If the else statement is not a nested else if, and just a raw else, generate IR, and create an unconditional branch to the merge point.</dt><dd></dd></dl>
<dl class="section user"><dt>Then place the else block before the merge block to avoid spagetti code.</dt><dd><div class="fragment"><div class="line">parent_function-&gt;getBasicBlockList().splice(std::next(else_blk-&gt;getIterator()), parent_function-&gt;getBasicBlockList(), merge_block-&gt;getIterator());</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>If thesres is no else statement to speak of, then place the then block before the merge block.</dt><dd><div class="fragment"><div class="line"><span class="keywordflow">else</span> {</div>
<div class="line">    parent_function-&gt;getBasicBlockList().splice(std::next(then_blk-&gt;getIterator()), parent_function-&gt;getBasicBlockList(), merge_block-&gt;getIterator());</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Then set the insertion point to the merge block, and proceed with code generation</dt><dd><div class="fragment"><div class="line"><a class="code hl_variable" href="namespacecodegen.html#a79b39c1264ded17ff5cd25cd3b5f880c">codegen::IR_Builder</a>-&gt;SetInsertPoint(merge_block);</div>
<div class="line"><span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
</div><!-- fragment --> </dd></dl>

<p>Implements <a class="el" href="classast_1_1top__level__expr.html#a3430477e06c9b7de405decf1466d8cc3">ast::top_level_expr</a>.</p>

</div>
</div>
<a id="ae01a4ba97ccdeb780f87cf579f4a5264" name="ae01a4ba97ccdeb780f87cf579f4a5264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae01a4ba97ccdeb780f87cf579f4a5264">&#9670;&#160;</a></span>debug_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast::if_expr::debug_output </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad4e600ed99c23a53b7469a6bc337beaf" name="ad4e600ed99c23a53b7469a6bc337beaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4e600ed99c23a53b7469a6bc337beaf">&#9670;&#160;</a></span>get_ast_class()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string ast::if_expr::get_ast_class </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classast_1_1top__level__expr.html#a918298ba5ca74d15ea618d8ca6b188cb">ast::top_level_expr</a>.</p>

</div>
</div>
<a id="a6346eb03d314a132fe1431ae1c0c323a" name="a6346eb03d314a132fe1431ae1c0c323a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6346eb03d314a132fe1431ae1c0c323a">&#9670;&#160;</a></span>get_merge_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::BasicBlock * ast::if_expr::get_merge_block </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classast_1_1top__level__expr.html#afab60adcd58e8d9ff1e9b97ca8f8e6cd">ast::top_level_expr</a>.</p>

</div>
</div>
<a id="ae6e8c5f5345e01f596ae9fd6bf43a839" name="ae6e8c5f5345e01f596ae9fd6bf43a839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6e8c5f5345e01f596ae9fd6bf43a839">&#9670;&#160;</a></span>semantic_analysis()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ast::if_expr::semantic_analysis </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section user"><dt>Semantically analyze if expressions.</dt><dd></dd></dl>
<dl class="section user"><dt>Validate we are not in the global scope, and create a new scope.</dt><dd><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="namespacesem__analysis__scope.html#a98b8a938b9d4e92e3ccc2c4bfe261758">sem_analysis_scope::get_scope_stack_size</a>() == 1) {</div>
<div class="line">    <a class="code hl_function" href="namespaceutility.html#a74c446b9b76a434629e0d79dff862a81">utility::sem_analysis_error</a>(<span class="stringliteral">&quot;Cannot have conditionals in the global scope&quot;</span>, <a class="code hl_variable" href="namespaceparser.html#a617812bda535490f07f50ab1aab0da4d">parser::current_line</a>);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="namespacesem__analysis__scope.html#aabe35ff7d69e8dcbf3d0b3e9b5c003af">sem_analysis_scope::create_scope</a>();</div>
<div class="ttc" id="anamespaceparser_html_a617812bda535490f07f50ab1aab0da4d"><div class="ttname"><a href="namespaceparser.html#a617812bda535490f07f50ab1aab0da4d">parser::current_line</a></div><div class="ttdeci">int current_line</div><div class="ttdef"><b>Definition</b> parser.cpp:19</div></div>
<div class="ttc" id="anamespacesem__analysis__scope_html_a98b8a938b9d4e92e3ccc2c4bfe261758"><div class="ttname"><a href="namespacesem__analysis__scope.html#a98b8a938b9d4e92e3ccc2c4bfe261758">sem_analysis_scope::get_scope_stack_size</a></div><div class="ttdeci">int get_scope_stack_size()</div><div class="ttdef"><b>Definition</b> scoping.cpp:458</div></div>
<div class="ttc" id="anamespacesem__analysis__scope_html_aabe35ff7d69e8dcbf3d0b3e9b5c003af"><div class="ttname"><a href="namespacesem__analysis__scope.html#aabe35ff7d69e8dcbf3d0b3e9b5c003af">sem_analysis_scope::create_scope</a></div><div class="ttdeci">void create_scope()</div><div class="ttdef"><b>Definition</b> scoping.cpp:128</div></div>
<div class="ttc" id="anamespaceutility_html_a74c446b9b76a434629e0d79dff862a81"><div class="ttname"><a href="namespaceutility.html#a74c446b9b76a434629e0d79dff862a81">utility::sem_analysis_error</a></div><div class="ttdeci">void sem_analysis_error(const std::string &amp;message, int line)</div><div class="ttdef"><b>Definition</b> utility.cpp:110</div></div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Semantically analyze the condition and verify that it is a boolean type.</dt><dd><div class="fragment"><div class="line">condition-&gt;semantic_analysis();</div>
<div class="line"><span class="keywordflow">if</span> (condition-&gt;get_expr_type() != <a class="code hl_enumvalue" href="namespacetype__enum.html#a87266d8d965aff35e2d37a7793dafd67a5e7c2dad432f01acfb54c338f6160df6">type_enum::bool_type</a>) {</div>
<div class="line">    <a class="code hl_function" href="namespaceutility.html#a74c446b9b76a434629e0d79dff862a81">utility::sem_analysis_error</a>(<span class="stringliteral">&quot;If statement does not contain a boolean condition&quot;</span>, <a class="code hl_variable" href="namespaceparser.html#a617812bda535490f07f50ab1aab0da4d">parser::current_line</a>);</div>
<div class="line">}</div>
<div class="ttc" id="anamespacetype__enum_html_a87266d8d965aff35e2d37a7793dafd67a5e7c2dad432f01acfb54c338f6160df6"><div class="ttname"><a href="namespacetype__enum.html#a87266d8d965aff35e2d37a7793dafd67a5e7c2dad432f01acfb54c338f6160df6">type_enum::bool_type</a></div><div class="ttdeci">@ bool_type</div><div class="ttdoc">Boolean type.</div><div class="ttdef"><b>Definition</b> types.h:13</div></div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Semantically analyze each expression in the if block, and then exit the scope.</dt><dd><div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; ast_node : expressions) {</div>
<div class="line">    ast_node-&gt;semantic_analysis();</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="namespacesem__analysis__scope.html#a743a1ef9b6ec895e1bdc779e84eefae8">sem_analysis_scope::exit_scope</a>(); </div>
<div class="ttc" id="anamespacesem__analysis__scope_html_a743a1ef9b6ec895e1bdc779e84eefae8"><div class="ttname"><a href="namespacesem__analysis__scope.html#a743a1ef9b6ec895e1bdc779e84eefae8">sem_analysis_scope::exit_scope</a></div><div class="ttdeci">void exit_scope()</div><div class="ttdef"><b>Definition</b> scoping.cpp:142</div></div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Semantically analyze else expressions.</dt><dd></dd></dl>
<dl class="section user"><dt>Create a scope, semantically analyze each expression in the else expression, and then exit the scope.</dt><dd><div class="fragment"><div class="line"><a class="code hl_function" href="namespacesem__analysis__scope.html#aabe35ff7d69e8dcbf3d0b3e9b5c003af">sem_analysis_scope::create_scope</a>();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; ast_node : expressions) {</div>
<div class="line">    ast_node-&gt;semantic_analysis();</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="namespacesem__analysis__scope.html#a743a1ef9b6ec895e1bdc779e84eefae8">sem_analysis_scope::exit_scope</a>();</div>
</div><!-- fragment --> </dd></dl>

<p>Reimplemented from <a class="el" href="classast_1_1top__level__expr.html#a374b3a0999fd8ca026da623966fb5e9f">ast::top_level_expr</a>.</p>

</div>
</div>
<a id="aa57ef3cdd4369756e07017bedd09e082" name="aa57ef3cdd4369756e07017bedd09e082"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa57ef3cdd4369756e07017bedd09e082">&#9670;&#160;</a></span>set_merge_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ast::if_expr::set_merge_block </td>
          <td>(</td>
          <td class="paramtype">llvm::BasicBlock *</td>          <td class="paramname"><span class="paramname"><em>new_merge_block</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classast_1_1top__level__expr.html#a6816a9a84cb7128fc53090f248c5f18f">ast::top_level_expr</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/ast/<a class="el" href="ast_8h_source.html">ast.h</a></li>
<li>src/<a class="el" href="type__checker_8cpp.html">type_checker.cpp</a></li>
<li>src/<a class="el" href="codegen_8cpp.html">codegen.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
